{% load humanize %}


{% for article in articles %}
  <div class="box">

    <div class="columns">
      <div class="column">
        <a href="{{ article.uri }}">
          <h2 class="title">{{ article.title }}</h2>
        </a>
        <span>{{ article.published_at | naturalday | title}}</span>
        &bull;
        <span><a href="{% url 'reader:feed-detail' article.feed.id %}">{{ article.feed.name }}</a></span>
      </div>

      {% if user.is_authenticated %}
        <div class="column is-narrow">
          <div class="field has-addons">

            <p class="control">
              {% if user.profile in article.stared_by.all %}
                <a class="button is-warning is-selected" data-id="{{ article.id }}" data-type="articles" data-action="unstar">
              {% else %}
                <a class="button" data-id="{{ article.id }}" data-type="articles" data-action="star">
              {% endif %}
                <span class="icon is-small">
                    <i class="far fa-star"></i>
                </span>
              </a>
            </p>

            <p class="control">
              {% if user.profile in article.read_by.all %}
                <a class="button is-success is-selected" data-id="{{ article.id }}" data-type="articles" data-action="unread">
              {% else %}
                <a class="button" data-id="{{ article.id }}" data-type="articles" data-action="read">
              {% endif %}
                <span class="icon is-small">
                    <i class="fas fa-check"></i>
                </span>
              </a>
            </p>

          </div>
        </div>
      {% endif %}

    </div>

    <div class="content">
      {{ article.content | safe }}
    </div>

  </div>
{% endfor %}


